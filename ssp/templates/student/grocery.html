
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stationary - Campus Cart</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Itim&display=swap"
      rel="stylesheet"
    />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Alegreya:wght@400;700&family=Old+Standard+TT&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" />
    <style>
      :root {
          --text-color: #8f3c2d;
          --background-color: #ffead6;
          --primary-color: #e07b39;
          --secondary-color: #886363;
          --accent-color: #743939;
      }

      body {
          font-family: "Old Standard TT", serif;
          background-color: var(--background-color);
          color: var(--text-color);
          line-height: 1.6;
      }

      h1, h2, h3, h4, h5, h6 {
          font-family: "Alegreya", serif;
          color: var(--accent-color);
      }

      .navbar {
          background-color: var(--accent-color);
          padding: 1rem 2rem;
      }

      .navbar-brand {
          font-family: "Alegreya", serif;
          font-size: 1.8rem;
          color: var(--background-color) !important;
      }

      .nav-link {
          color: var(--background-color) !important;
          font-family: "Old Standard TT", serif;
          font-size: 1.1rem;
          margin: 0 0.5rem;
          transition: color 0.3s ease;
      }

      .nav-link:hover {
          color: var(--primary-color) !important;
      }

      .btn-primary {
          background-color: var(--primary-color);
          border-color: var(--primary-color);
          color: var(--background-color);
          transition: all 0.3s ease;
      }

      .btn-primary:hover {
          background-color: var(--accent-color);
          border-color: var(--accent-color);
      }

      .btn-secondary {
          background-color: var(--secondary-color);
          border-color: var(--secondary-color);
          color: var(--background-color);
          transition: all 0.3s ease;
      }

      .btn-secondary:hover {
          background-color: var(--accent-color);
          border-color: var(--accent-color);
      }

      .card {
          border: none;
          border-radius: 15px;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          background-color: white;
          margin-bottom: 1.5rem;
      }

      .card-header {
          background-color: var(--primary-color);
          color: var(--background-color);
          border-radius: 15px 15px 0 0 !important;
          font-family: "Alegreya", serif;
          font-size: 1.5rem;
      }

      .footer {
          background-color: var(--accent-color);
          color: var(--background-color);
          padding: 2rem 0;
          width: 100%;
          margin-top: 3rem;
      }

      .footer a:hover {
          color: var(--primary-color);
          text-decoration: underline;
      }

      .custom-container {
          background-color: white;
          border-radius: 15px;
          padding: 2rem;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          margin-top: 2rem;
      }

      .form-control {
          border: 2px solid var(--secondary-color);
          border-radius: 8px;
      }

      .form-control:focus {
          border-color: var(--primary-color);
          box-shadow: 0 0 0 0.2rem rgba(224, 123, 57, 0.25);
      }

      .row {
          justify-content: center;
      }
      .fixed-cart-button {
  position: fixed;
  bottom: 40px;
  right: 20px;
  background: var(--background-color); /* Gradient background */
  padding: 15px 20px; /* Adjusted padding for better appearance */
  border-radius: 30px; /* Rounded corners */
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); /* Subtle shadow for a 3D effect */
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000; /* Ensures the button stays on top */
}

.fixed-cart-button a {
  text-decoration: none; /* Removes underline */
  color: var(--text-color); /* Light text color to contrast with the background */
  font-size: 16px; /* Adjusts text size */
  font-weight: bold; /* Makes the text bold */
  display: flex;
  align-items: center;
  gap: 8px; /* Spacing between the icon and text */
}

.fixed-cart-button svg {
  fill: #f7f1e3; /* Color the icon the same as text */
  width: 24px; /* Icon size */
  height: 24px; /* Icon size */
}
.cart-message {
        display: none;
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: #4CAF50;
        color: white;
        padding: 15px;
        border-radius: 5px;
        z-index: 1000;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      }
  </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar">
      <div class="container-fluid">
        <a class="navbar-brand" href="{{ url_for('student.home') }}"
          >Campus Cart</a
        >
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('student.home') }}">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('student.profile') }}"
              >Profile</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('student.cart') }}">Cart</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('student.notifications') }}"
              >Notifications</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('student.orders') }}"
              >Orders</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('student.logout') }}"
              >Logout</a
            >
          </li>
        </ul>
      </div>
    </nav>

    <!-- Welcome message with improved styling -->      
    <div class="welcome-section pt-20 pb-8 px-6">
      <div class="container mx-auto">
        <div class="bg-gradient-to-r from-[#34495e] to-[#2c3e50] rounded-lg p-6 shadow-lg">
          <h1 class="text-3xl md:text-4xl text-[#f7f1e3] font-bold">
            Welcome, {{ current_user.name }}! ðŸ›’
          </h1>
          <p class="text-[#f1c40f] mt-2 text-lg">
            Browse our fresh grocery selection for today  
          </p>
        </div>
      </div>
    </div>

    <main class="container">
      <h2 class="text-2xl text-warm-ivory mb-6">Grocery Items:</h2>
    
      <div class="container">
        <div class="row d-flex flex-wrap justify-content-start"> <!-- Use 'justify-content-start' for better alignment -->
          <!-- Item 1 -->
          <div class="col-lg-3 col-md-4 col-sm-6 mb-4"> <!-- Adjust grid for different screen sizes -->
            <div class="card rounded-lg p-4 flex flex-col">
                <img src="https://m.media-amazon.com/images/I/513SGvOptJL._SX300_SY300_QL70_FMwebp_.jpg" alt="Apples"
                class="w-full h-48 object-cover rounded-md mb-4"
              />
              <h3 class="text-lg font-semibold mb-2">Apple 500g</h3>
              <p class="text-gray-600 mb-4">Price: â‚¹80</p>
    
              <div class="flex justify-between items-center mt-auto">
                <button
                  onclick="addToCart(1)"
                  class="btn-primary px-4 py-2 rounded-md"
                  disabled
                >
                  Add to cart
                </button>
                <div class="flex items-center">
                  <button
                    onclick="decreaseQuantity(1)"
                    class="btn-secondary px-2 py-1 rounded-md mr-2"
                  >
                    -
                  </button>
                  <span id="quantity-1">0</span>
                  <button
                    onclick="increaseQuantity(1)"
                    class="btn-secondary px-2 py-1 rounded-md ml-2"
                  >
                    +
                  </button>
                </div>
              </div>
    
              <div class="mt-4 text-right">
                <p class="font-semibold" id="total-1">Total: â‚¹0.00</p>
              </div>
            </div>
          </div>
    
          <!-- Item 2 -->
          <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
            <div class="card rounded-lg p-4 flex flex-col">
                <img src="https://m.media-amazon.com/images/I/51LwYFjq+dL._SY300_SX300_.jpg" alt="Energy Drink"
                class="w-full h-48 object-cover rounded-md mb-4"
              />
              <h3 class="text-lg font-semibold mb-2">Energy Drink 6 pack</h3>
              <p class="text-gray-600 mb-4">Price: â‚¹240</p>
    
              <div class="flex justify-between items-center mt-auto">
                <button
                  onclick="addToCart(2)"
                  class="btn-primary px-4 py-2 rounded-md"
                  disabled
                >
                  Add to cart
                </button>
                <div class="flex items-center">
                  <button
                    onclick="decreaseQuantity(2)"
                    class="btn-secondary px-2 py-1 rounded-md mr-2"
                  >
                    -
                  </button>
                  <span id="quantity-2">0</span>
                  <button
                    onclick="increaseQuantity(2)"
                    class="btn-secondary px-2 py-1 rounded-md ml-2"
                  >
                    +
                  </button>
                </div>
              </div>
    
              <div class="mt-4 text-right">
                <p class="font-semibold" id="total-2">Total: â‚¹0.00</p>
              </div>
            </div>
          </div>
    
          <!-- Item 3 -->
          <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
            <div class="card rounded-lg p-4 flex flex-col">
                <img src="https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcTYbacQQdQaNvAzVauBdkGGu6ZwRgDrbnRaA3WC6mZtjyT-_ce-xIk657vYpZuXGmIJ7RpsHITEc95LmHpV_wtEvThR41RVqw&usqp=CAY" alt="Peanut Butter" 
                class="w-full h-48 object-cover rounded-md mb-4"
              />
              <h3 class="text-lg font-semibold mb-2">Peanut Butter 300g</h3>
              <p class="text-gray-600 mb-4">Price: â‚¹220</p>
    
              <div class="flex justify-between items-center mt-auto">
                <button
                  onclick="addToCart(3)"
                  class="btn-primary px-4 py-2 rounded-md"
                  disabled
                >
                  Add to cart
                </button>
                <div class="flex items-center">
                  <button
                    onclick="decreaseQuantity(3)"
                    class="btn-secondary px-2 py-1 rounded-md mr-2"
                  >
                    -
                  </button>
                  <span id="quantity-3">0</span>
                  <button
                    onclick="increaseQuantity(3)"
                    class="btn-secondary px-2 py-1 rounded-md ml-2"
                  >
                    +
                  </button>
                </div>
              </div>
    
              <div class="mt-4 text-right">
                <p class="font-semibold" id="total-3">Total: â‚¹0.00</p>
              </div>
            </div>
          </div>
    
          <!-- Item 4 -->
          <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
            <div class="card rounded-lg p-4 flex flex-col">
                <img src="https://m.media-amazon.com/images/I/41H+yEQMDxL._SY300_SX300_.jpg" alt="Mixed Fruit Jam"
                class="w-full h-48 object-cover rounded-md mb-4"
              />
              <h3 class="text-lg font-semibold mb-2">Mixed Fruit Jam 300g</h3>
              <p class="text-gray-600 mb-4">Price: â‚¹120</p>
    
              <div class="flex justify-between items-center mt-auto">
                <button
                  onclick="addToCart(4)"
                  class="btn-primary px-4 py-2 rounded-md"
                  disabled
                >
                  Add to cart
                </button>
                <div class="flex items-center">
                  <button
                    onclick="decreaseQuantity(4)"
                    class="btn-secondary px-2 py-1 rounded-md mr-2"
                  >
                    -
                  </button>
                  <span id="quantity-4">0</span>
                  <button
                    onclick="increaseQuantity(4)"
                    class="btn-secondary px-2 py-1 rounded-md ml-2"
                  >
                    +
                  </button>
                </div>
              </div>
    
              <div class="mt-4 text-right">
                <p class="font-semibold" id="total-4">Total: â‚¹0.00</p>
              </div>
            </div>
          </div>
    
        </div>
      </div>
    </main>
    

    <div
      id="cartMessage"
      class="cart-message"
      role="alert"
      aria-live="assertive"
    ></div>

    <script>
        const products = [
          { id: 1, name: "Apple (500g)", price: 80, quantity: 0 },
          { id: 2, name: "Energy Drink (6-pack)", price: 240, quantity: 0 },
          { id: 3, name: "Peanut Butter (500g)", price: 220, quantity: 0 },
          { id: 4, name: "Mixed Fruit Jam (300g)", price: 120, quantity: 0 },
        ];

      function increaseQuantity(id) {
          const product = products.find((p) => p.id === id);
          if (product.quantity < 5) {
            product.quantity++;
            updateUI(product);
          }
        }

        function decreaseQuantity(id) {
          const product = products.find((p) => p.id === id);
          if (product.quantity > 0) {
            product.quantity--;
            updateUI(product);
          }
        }

        function addToCart(id) {
          const product = products.find((p) => p.id === id);
          if (!product || product.quantity <= 0) return;

          const data = `name=${product.name}&quantity=${product.quantity}&price=${product.price}`;

          fetch('{{ url_for('student.add_to_cart') }}', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: data
          })
          .then(response => response.text())
          .then(text => {
            showCartMessage(`Added ${product.quantity} ${product.name}(s) to cart`);
            product.quantity = 0;
            updateUI(product);
          })
          .catch(error => {
            showCartMessage('Error adding to cart');
            console.error('Error:', error);
          });
        }

        function showCartMessage(message) {
          const cartMessage = document.getElementById("cartMessage");
          cartMessage.textContent = message;
          cartMessage.style.display = "block";
          setTimeout(() => {
            cartMessage.style.display = "none";
          }, 3000);
        }

        function updateUI(product) {
          const quantityElement = document.getElementById(`quantity-${product.id}`);
          const totalElement = document.getElementById(`total-${product.id}`);
          const addToCartButton = document.querySelector(`[onclick="addToCart(${product.id})"]`);

          if (quantityElement) quantityElement.textContent = product.quantity;
          if (totalElement) totalElement.textContent = `Total: â‚¹${(product.quantity * product.price).toFixed(2)}`;
          if (addToCartButton) addToCartButton.disabled = product.quantity === 0;
        }

        // Initialize all products
        document.addEventListener('DOMContentLoaded', function() {
          products.forEach(product => {
            productHandlers.updateProductUI(product);
          });
        });
      </script>
    <div class="fixed-cart-button">
      <a href="{{ url_for('student.cart') }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
          </svg>
          Go to Cart
      </a>
  </div>
  <footer class="footer text-center mt-5">
    <p>&copy; 2024 Campus Cart. All Rights Reserved.</p>
    <p>
        <a href="#" class="text-white">Terms of Service</a> |
        <a href="#" class="text-white">Privacy Policy</a> |
        <a href="#" class="text-white">Contact Us</a>
    </p>
</footer>

  </body>
</html>
